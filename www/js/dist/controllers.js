!function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l,u){function d(){I.dias=1,m()}function m(){n.show(),I.caixa=[],I.movimento=[],I.resumoMovimento=[],I.resumoVendas=[],I.balancete=[],I.cancelamentos=[],I.totalCancelamentos="",I.listagem=!0,r.async("GetTurno/"+I.dias).then(function(o){n.show({template:"Carregando Turnos"}),I.dados=o,a(function(){n.hide(),i.scrollTop()},1e3)})}function p(){a(function(){n.hide()},1e3)}function f(){n.show(),I.movimento=[],r.async("GetMovimentoDoTurno/"+I.caixa.ID_CAIXA+"/"+I.caixa.TURNO).then(function(o){n.show({template:"Carregando Movimentos do Turno"}),I.movimento=o,p()})}function h(){n.show(),I.resumoMovimento=[],r.async("GetResumoDoMovimentoDoTurno/"+I.caixa.ID_CAIXA+"/"+I.caixa.TURNO).then(function(o){n.show({template:"Carregando Resumo dos Movimentos do Turno"}),I.resumoMovimento=o,p()})}function g(){n.show(),I.resumoVendas=[],r.async("GetResumoDaVendaDoTurno/"+I.caixa.ID_CAIXA+"/"+I.caixa.TURNO).then(function(o){n.show({template:"Carregando Resumo das Vendas do Turno"}),I.resumoVendas=o,p()})}function v(){n.show(),I.balancete=[],r.async("GetBalanceteDoTurno/"+I.caixa.ID_CAIXA+"/"+I.caixa.TURNO).then(function(o){n.show({template:"Carregando Balancete do Turno"}),I.balancete=o,p()})}function C(){n.show(),I.cancelamentos=[],r.async("GetCancelamentoNoTurno/"+I.caixa.ID_CAIXA+"/"+I.caixa.TURNO).then(function(o){if(n.show({template:"Carregando Cancelamentos do Turno"}),c.ContarObjetos(o[0])>0){var e=w(o);I.cancelamentos=o,I.totalCancelamentos=l.ConverterParaString(e.toFixed(2))}p()})}function b(){I.dias=I.data.dias,m()}function $(){var o='<label class="item item-input">';return o+='<span class="input-label">Dias: </span>',o+='<input type="text" ng-model="vm.data.dias" readonly>',o+="</label>",o+='<div class="item range range-positive">',o+='<i class="icon ion-ios-minus"></i>',o+='<input type="range" min="1" max="31" ng-model="vm.data.dias">',o+='<i class="icon ion-ios-plus"></i>',o+="</div>"}function S(){return t.show({template:$(),title:"Informar os Dias",scope:e,buttons:[{text:"<b>Processar Relatório</b>",type:"button-light",onTap:function(o){I.data.dias?b():o.preventDefault()}}]})}function w(o){for(var e=o[0],t=c.ContarObjetos(e),n=0,a=0;a<t;)n+=l.ConverterParaFloat(e[a].VALOR),a++;return n}var I=this;I.listagem=!0,I.titulo="Relação de Caixas",I.dias="",I.datahora="",I.dataInicial="",I.totalCancelamentos="",I.movimento=[],I.resumoMovimento=[],I.resumoVendas=[],I.balancete=[],I.cancelamentos=[],I.dados=[],I.init=d,I.GetTurno=m,I.GerarRelatorio=function(e){I.listagem=!1,I.caixa=e,I.datahora=s.RetornarDataHora(),o.when(I.caixa).then(f()).then(h()).then(g()).then(v()).then(C())},I.ProcessarRelatorio=b,I.SelecionarDias=function(){I.data={},I.data.dias=1;S()},I.TemplateSelecionarDias=$,I.PopUpSelecionarDias=S,e.$on("EventLogin",d())}angular.module("sied.controllers").controller("CaixaCtrl",o),o.$inject=["$q","$scope","$ionicPopup","$ionicLoading","$timeout","$ionicScrollDelegate","ClientAPIFactory","TratarDataService","TratarObjetosService","TratarFloatService","$log"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s){function c(){g.nivel=s.getNivel(),u()}function l(){g.comandas=[],g.comanda="",g.tipo="",g.item="",g.index="",g.codigo="",g.relatorio=!0,u()}function u(){n.show(),g.relatorio=!0,o.when(g.relatorio).then(function(){m()}).then(function(){p()}).then(function(){i.scrollTop()})}function d(){e(function(){n.hide()},1e3)}function m(){n.show(),g.mesas=[],r.async("GetRetornaMesasEmMovimento").then(function(o){n.show({template:"Carregando Movimento das Mesas"}),g.mesas=o,d()})}function p(){n.show(),g.cartoes=[],r.async("GetRetornaCartoesEmMovimento").then(function(o){n.show({template:"Carregando Movimento dos Cartões"}),g.cartoes=o,d()})}function f(o,e,t){return a.show({title:"Atenção",template:"Deseja excluir esse item?",buttons:[{text:"Não",type:"button-light"},{text:"<b>Sim</b>",type:"button-light",onTap:function(n){n&&(g.item=o,g.index=e,g.codigo=t,h())}}]})}function h(){n.show(),r.async("GetCancelaItemDaComanda/"+g.item+"/"+g.codigo+"/"+g.comanda+"/"+g.tipo+"/2").then(function(o){n.show({template:"Removendo Item"}),g.comandas[0].splice(g.index,1),g.item="",g.index="",e(function(){n.hide(),0==g.comandas[0].length&&l()},500)})}var g=this;g.titulo="Cancelamento de itens",g.relatorio=!1,g.mesas=[],g.cartoes=[],g.comandas=[],g.comanda="",g.item="",g.index="",g.tipo="",g.codigo="",g.nivel="",g.init=c,g.Voltar=l,g.CarregarItemsEmMovimento=u,g.RetornaMesasEmMovimento=m,g.RetornaCartoesEmMovimento=p,g.RetornaItemsDaComanda=function(o,t){n.show(),g.comanda=o,g.tipo=t,g.relatorio=!1,g.comandas=[],r.async("GetRetornaItensDaComanda/"+o+"/"+t).then(function(o){n.show({template:"Carregando Itens da Comanda"}),g.comandas=o,e(function(){n.hide(),i.scrollTop()},1e3)})},g.EnviarCancelamento=function(o,e,t){f(o,t,e)},g.RemoverItemDaComanda=h,t.$on("EventLogin",c())}angular.module("sied.controllers").controller("CancelamentosCtrl",o),o.$inject=["$q","$timeout","$scope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","ClientAPIFactory","UsuarioFactory"]}(),function(){"use strict";function o(o,e,t,n,a,i,r){function s(){c()}function c(){a.show(),m.dados=[],r.async("GetRetornaProdutoPorPrecoCompra").then(function(e){a.show({template:"Carregando Produtos pelo preço de compra"}),m.dados=e,o.info(m.dados),m.relatorio=!0,t(function(){a.hide(),i.scrollTop()},1e3)})}function l(){t(function(){a.hide()},1e3)}function u(o){a.show(),m.cabecalho=[],r.async("GetRetornaCompraCabecalhoItem/"+o.Codigo).then(function(o){a.show(),m.cabecalho=o,l()})}function d(o){a.show(),m.detalhes=[],r.async("GetRetornaCompraItem/"+o.Codigo).then(function(o){a.show(),m.detalhes=o,l()})}var m=this;m.titulo="Compras",m.relatorio=!1,m.dados=[],m.cabecalho=[],m.detalhes=[],m.init=s,m.Voltar=function(){m.cabecalho=[],m.detalhes=[],m.relatorio=!0,a.show(),t(function(){a.hide()},1e3)},m.RetornarProdutosByPrecoCompra=c,m.RetornarDetalhesDoItem=function(o){a.show(),m.relatorio=!1,e.when(m.relatorio).then(u(o)).then(d(o)).then(function(){i.scrollTop()})},n.$on("EventLogin",s())}angular.module("sied.controllers").controller("ComprasCtrl",o),o.$inject=["$log","$q","$timeout","$scope","$ionicLoading","$ionicScrollDelegate","ClientAPIFactory"]}(),function(){"use strict";function o(o,e,t,n,a,i,r){function s(){h.mensagem=[],n.show(),i.allServidores().then(function(o){h.servidores=o,c()})}function c(){e(function(){n.hide()},1e3)}function l(){if(n.show(),h.mensagem=[],!h.Ip)return h.mensagem[0]="Nenhum IP foi especificado",c(),!1;i.findByValue(h.Ip).then(function(t){var a=t.Ip+":"+t.Porta;h.servidor={},h.Ip="",r.limparServidores().then(function(){var t=new Date,i=""+t.getDay()+t.getMonth()+t.getFullYear()+t.getHours()+t.getMinutes()+t.getSeconds();r.addServidor({_id:i,servidor:a}).then(function(t){e(function(){n.hide(),o.location.reload(!0)},500)})})})}function u(){if(n.show(),m(),!(h.mensagem.length>0)){h.Ip=h.servidor.Ip;var o=new Date,e=""+o.getDay()+o.getMonth()+o.getFullYear()+o.getHours()+o.getMinutes()+o.getSeconds();h.servidor={_id:e,Ip:h.servidor.Ip,Porta:h.servidor.Porta},i.addServidor(h.servidor).then(function(o){h.Ip=h.servidor.Ip,l()})}}function d(){n.show(),i.findByValue(h.Ip).then(function(o){var e=o.Ip+":"+o.Porta;r.findByValue(e).then(function(o){o&&r.deleteServidor(o).then(function(){c()})}),i.deleteServidor(o).then(function(){c()})})}function m(){h.mensagem=[],""==h.servidor.Ip&&h.mensagem.push("O IP é Obrigatório"),""==h.servidor.Porta&&h.mensagem.push("A Porta é Obrigatório")}function p(){return a.show({title:"Novo Servidor",template:f(),scope:t,buttons:[{text:"Cancelar",type:"button-light"},{text:"Salvar",type:"button-light",onTap:function(o){if(m(),!(h.mensagem.length>0))return u();o.preventDefault()}}]})}function f(){var o="";return o+='<div class="item item-assertive" ng-show="vm.mensagem.length > 0">',o+="<ul>",o+='<li ng-repeat="item in vm.mensagem">{{ item }}</li>',o+="</ul>",o+="</div>",o+='<label class="item item-input item-stacked-label">',o+='<span class="input-label">IP do Servidor</span>',o+='<input type="text" name="Ip" ng-model="vm.servidor.Ip" ng-change="vm.LimparMensagem()" autofocus />',o+="</label>",o+='<label class="item item-input item-stacked-label">',o+='<span class="input-label">Porta do Servidor</span>',o+='<input type="text" name="Porta" ng-model="vm.servidor.Porta" ng-change="vm.LimparMensagem()" />',o+="</label>"}var h=this;h.servidores=[],h.servidor={},h.selecionado={},h.index="",h.mensagem=[],h.host="",h.Ip="",h.init=s,h.selecionar=l,h.novo=function(){h.mensagem=[],h.servidor={Ip:"",Porta:""};p()},h.salvar=u,h.excluir=d,h.validarDados=m,h.LimparMensagem=function(){h.mensagem=[]},h.PopUpConfirmarExclusao=function(){return h.mensagem=[],""==h.Ip?(h.mensagem.push("Nenhum IP foi especificado"),!1):a.show({title:"Atenção",template:"Deseja excluir esse Servidor?",scope:t,buttons:[{text:"Não",type:"button-light"},{text:"Sim",type:"button-light",onTap:function(o){d()}}]})},h.PopUpNovoServidor=p,h.TemplateNovoServidor=f,s()}angular.module("sied.controllers").controller("ConfigCtrl",o),o.$inject=["$window","$timeout","$scope","$ionicLoading","$ionicPopup","DataFactory","ServidorFactory"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c){function l(){a.show(),e.when(p.caixa).then(m())}function u(){a.show(),p.caixa=[],r.async("GetVendaEmConsumoCaixa").then(function(o){a.show({template:"Carregando Vendas em Caixa"}),p.caixa=o,t(function(){a.hide()},1e3)})}function d(){a.show(),p.consumo=[],r.async("GetVendaEmConsumo").then(function(o){a.show({template:"Carregando Vendas em Consumo"}),p.consumo=o,t(function(){a.hide()},1e3)})}function m(){e.when(p.caixa).then(u()).then(d()),i.scrollTop()}var p=this;p.titulo="Vendas em Consumo",p.controlador="ConsumoCtrl",p.metodo="",p.caixa=[],p.consumo=[],p.init=l,p.GerarRelatorio=m,p.GetVendaEmConsumoCaixa=u,p.GetVendaEmConsumo=d,n.$on("EventLogin",l())}angular.module("sied.controllers").controller("ConsumoCtrl",o),o.$inject=["$log","$q","$timeout","$scope","$ionicLoading","$ionicScrollDelegate","ClientAPIFactory","TratarDataService","TratarObjetosService"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l){function u(){g.dataInicial=s.SubtrairDataSemFormato(1),g.dataFinal=new Date,d()}function d(){a.show(),e.when(g.dataFinal).then(f()).then(h()).then(function(){i.scrollTop()})}function m(){for(var o=g.fechados,e=0,t=c.ContarObjetos(o[0]),n=0;n<t;)e+=l.ConverterParaFloat(o[0][n].Total),n++;g.totalFechados=e,g.totalGeral=g.totalFechados}function p(){for(var o=g.consumos,e=0,t=c.ContarObjetos(o[0]),n=0;n<t;)e+=l.ConverterParaFloat(o[0][n].Total),n++;g.totalConsumos=e,g.totalGeral=g.totalGeral+g.totalConsumos,g.totalFechados.toFixed(2),g.totalFechados.toFixed(2),g.totalGeral.toFixed(2),g.totalGeral=l.ConverterParaString(g.totalGeral),g.totalConsumos=l.ConverterParaString(g.totalConsumos),g.totalFechados=l.ConverterParaString(g.totalFechados)}function f(){a.show(),g.fechados=[],g.totalFechados=0;var o=s.formatarDataHora(g.dataInicial),e=s.formatarDataHora(g.dataFinal);r.async("GetRetornaCouvertFechado/"+o+"/"+e).then(function(o){a.show({template:"Carregando Couvert Fechado"}),g.fechados=o,c.ContarObjetos(g.fechados[0])>0&&m(),t(function(){a.hide()},1e3)})}function h(){a.show(),g.consumos=[],g.totalConsumos=0,r.async("GetRetornaCouvertMovimento").then(function(o){a.show({template:"Carregando Couvert em Movimento"}),g.consumos=o,c.ContarObjetos(g.consumos[0])>0&&p(),t(function(){a.hide()},1e3)})}var g=this;g.dataInicial="",g.dataFinal="",g.fechados=[],g.consumos=[],g.totalGeral=0,g.totalConsumos=0,g.totalFechados=0,g.init=u,g.GerarCouvert=d,g.GetRetornaCouvertFechado=f,g.GetRetornaCouvertMovimento=h,n.$on("EventLogin",u())}angular.module("sied.controllers").controller("CouvertCtrl",o),o.$inject=["$log","$q","$timeout","$scope","$ionicLoading","$ionicScrollDelegate","ClientAPIFactory","TratarDataService","TratarObjetosService","TratarFloatService"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c){function l(){u(),g.grupo=0,g.tipo=0,d()}function u(){s.async("GetGrupoDeProduto").then(function(o){g.grupos=[],g.grupos=o,c.ContarObjetos(g.grupos)>0&&g.grupos[0].unshift({Codigo:0,Grupo:"Todos"})})}function d(){n.show();var e={grupo:g.grupo,tipo:g.tipo};g.relatorio=!1,g.dados=[],o.when(e).then(function(o){var e="";switch(o.tipo){case 0:e=0;break;case 1:e="EstoqueZero";break;case 2:e="AbaixoEstoqueMinimo";break;case 3:e="AbaixoPontoPedido";break;case 4:e="AbaixoEstoquePadrao"}s.async("GetEstoque/"+o.grupo+"/"+e).then(function(o){n.show({template:"Carregando Estoque"}),g.dados=o,c.ContarObjetos(g.dados[0])>0&&(g.relatorio=!0),t(function(){n.hide(),r.scrollTop()},1e3)})})}function m(){for(var o=0,e=g.tipos.length,t="<ion-list>";o<e;)t+='<ion-radio ng-model="vm.data.tipo" ng-value="'+g.tipos[o].id+'" style="font-size: 12px;">'+g.tipos[o].descricao+"</ion-radio>",o++;return t+="</ion-list>"}function p(){for(var o=0,e=c.ContarObjetos(g.grupos[0]),t="<ion-list>";o<e;)t+='<ion-radio ng-model="vm.data.grupo" ng-value="'+g.grupos[0][o].Codigo+'" style="font-size: 12px;" >'+g.grupos[0][o].Grupo+"</ion-radio>",o++;return t+="</ion-list>"}function f(){return i.show({template:m(),title:"Informar o Tipo de Relatório",scope:a,buttons:[{text:"<b>Gerar Relatório</b>",type:"button-light",onTap:function(o){g.tipo=g.data.tipo,d()}}]})}function h(){return i.show({template:p(),title:"Informar o Grupo",scope:a,buttons:[{text:"<b>Selecionar Grupo</b>",type:"button-light",onTap:function(o){g.grupo=g.data.grupo,d()}}]})}var g=this;g.titulo="Controle de Estoque",g.relatorio=!1,g.tipo=0,g.grupo=0,g.dados=[],g.grupos=[],g.tipos=[{id:0,descricao:"Todos"},{id:1,descricao:"Estoque Zero"},{id:2,descricao:"Abaixo do Estoque Mínimo"},{id:3,descricao:"Abaixo do Ponto de Pedido"},{id:4,descricao:"Abaixo do Estoque Padrão"}],g.init=l,g.LoadGrupos=u,g.SetTipo=function(){g.data={},g.data.tipo=g.tipo;f()},g.SetGrupo=function(){g.data={},g.data.grupo=g.grupo;h()},g.TemplateSetTipo=m,g.TemplateSetGrupo=p,g.PopUpSetTipo=f,g.PopUpSetGrupo=h,g.GerarRelatorio=d,a.$on("EventLogin",l())}angular.module("sied.controllers").controller("EstoqueCtrl",o),o.$inject=["$q","$log","$timeout","$ionicLoading","$scope","$ionicPopup","$ionicScrollDelegate","ClientAPIFactory","TratarObjetosService"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l){function u(){a.show(),h.dataFinal=new Date,o.when(h.dataFinal).then(function(){h.dataInicial=l.SubtrairDataSemFormato(1)}).then(function(){f()})}function d(o){s.copy(o).then(function(){console.log(o)})}function m(o){var e="<strong> Título: "+o.Titulo+"<br />";return e+="<strong> Fornecedor: "+o.Fornecedor+"<br />",e+="<strong> Valor: "+o.Valor+"<br />",e+="<strong> Vencimento: "+o.Vencimento,""!==o.Barra&&(e+="<br /><strong>Cod.Barra: </strong>"+o.Barra.substring(0,18)),e}function p(o){return i.show({title:"Copiar Código de Barra",template:m(o),buttons:[{text:"Sair",type:"button-light"},{text:"Copiar",type:"button-light",onTap:function(e){e&&d(o.Barra)}}]})}function f(){a.show();var o={d1:l.formatarDataAPI(h.dataInicial),d2:l.formatarDataAPI(h.dataFinal)};h.dados=[],c.async("GetContasAPagar/"+o.d1+"/"+o.d2).then(function(o){a.show({template:"Carregando Financeiro"}),h.dados=o}).then(function(){e(function(){a.hide(),r.scrollTop()},1e3)})}var h=this;h.titulo="Financeiro",h.dados=[],h.relatorio=!1,h.dataInicial="",h.dataFinal="",h.init=u,h.copiarTexto=d,h.pegarCodigoDeBarra=function(o){""==o.Titulo&&""==o.Fornecedor&&""==o.Vencimento||p(o)},h.GerarRelatorio=f,n.$on("EventLogin",u())}angular.module("sied.controllers").controller("FinanceiroCtrl",o),o.$inject=["$q","$timeout","$log","$scope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","$cordovaClipboard","ClientAPIFactory","TratarDataService"]}(),function(){"use strict";function o(o,e,t,n,a){function i(){s.cnpj=n.cnpj}function r(){e.confirm({title:"Atenção",template:"Tem certeza que deseja sair do sistema?"}).then(function(o){o&&ionic.Platform.exitApp()})}var s=this;s.ConfirmarSaida=r,s.toggleLeft=function(){t.toggleLeft()},s.init=i,i(),o.registerBackButtonAction(function(o){r()},100)}angular.module("sied.controllers").controller("InicioCtrl",o),o.$inject=["$ionicPlatform","$ionicPopup","$ionicSideMenuDelegate","$rootScope","$log"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l,u){function d(){var o=e.defer();return a.lastServidor().then(function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}function m(o){w.index=o,w.swiper.slideTo(o)}function p(o){var t=e.defer(),n=[],a=[],r=0,s=0;return i.montar(o).then(function(o){for(a=o,r=o.length,n.push({Evento:"vm.preLogin()",Icone:"ion-locked",Nome:"Login",Index:"",Template:""});s<r;)n.push({Evento:o[s].Evento,Icone:o[s].Icone,Nome:o[s].Nome,Template:o[s].Template}),s++;n.push({Evento:"vm.Sair()",Icone:"ion-power",Nome:"Sair",Index:"",Template:""}),t.resolve({slide:a,menu:n})}),t.promise}function f(){var o="";return o+='<div class="item item-assertive mb" ng-show="vm.mensagem.length>0">',o+="<ul>",o+='<li ng-repeat="item in vm.mensagem">{{ item }}</li>',o+="</ul>",o+="</div>",o+='<input ng-model="vm.dados.senha" type="number" autofocus ng-change="vm.mensagem=[]"/>'}function h(o){for(var e="",t=0;t<o;)e+='<ion-radio ng-model="vm.dados.usuario" ng-value="'+t+'" ng-click="vm.SelecionarUsuario()">'+w.usuarios[0][t].Nome+"</ion-radio>",t++;return e}function g(){return w.menu=[],w.slide=[],t.show({title:"Informe a senha",template:f(),scope:o,buttons:[{text:"Sair",type:"button-light",onTap:function(o){p(0).then(function(o){w.menu=o.menu,w.slide=o.slide,ionic.Platform.exitApp()})}},{text:"Voltar",type:"button-light",onTap:function(o){b()}},{text:"Entrar",type:"button-light",onTap:function(o){""==w.dados.senha&&w.mensagem.push("A Senha é obrigatório"),w.dados.senha!=w.usuario.Senha&&w.mensagem.push("Senha inválida"),w.mensagem.length>0?o.preventDefault():v()}}]})}function v(){c.setParams(w.usuario),p(1).then(function(e){w.menu=e.menu,w.slide=e.slide,w.checarLogin=!0,o.$emit("EventLogin",$(w.usuario))})}function C(e){return t.show({title:"Selecione o usuario",template:h(e),scope:o})}function b(){w.menu=[],w.slide=[],w.checarLogin=!1,w.dados.usuario="",s.asyncLogin("GetLogin").then(function(o){w.usuarios=o;var e=l.ContarObjetos(w.usuarios[0]);s.async("GetRetornaCnpjDaEmpresa").then(function(o){n.cnpj=o[0]}),w.popup=C(e)}).catch(function(o){p(0).then(function(o){w.menu=o.menu,w.slide=o.slide})})}function $(o){w.usuario=o}function S(){w.dados.senha="";g()}var w=this;n.showFooter=!1,w.hide=!1,w.index=0,w.selecionado={},w.dados={usuario:"",senha:""},w.mensagem=[],w.servidores=[],w.usuarios=[],w.usuario={},w.menu=[],w.popup="",w.checarLogin=!1,w.dashboard={swiper:!1,slider:!1,activeIndexView:0},w.configurarServidor=d,w.MudarSlide=m,w.SelecionarUsuario=function(){var o=w.dados.usuario;w.usuario=w.usuarios[0][o],S(),w.popup.close()},w.Voltar=function(){0!==o.index&&(w.index=o.index-1,m(o.index))},w.Sair=function(){ionic.Platform.exitApp()},w.login=S,w.preLogin=b,w.init=function(){w.menu=[],w.slide=[],d().then(function(o){o?(w.host=o[0],r.setConfig(w.host.servidor),b()):p(0).then(function(o){w.menu=o.menu,w.slide=o.slide})}).catch(function(o){p(0).then(function(o){w.menu=o.menu,w.slide=o.slide})})},w.pagina=0,o.$on("$ionicSlides.sliderInitialized",function(o,e){e&&e.slider&&(w.swiper=e.slider,w.teste=e.slider)}),o.$on("$ionicSlides.slideChangeStart",function(e,t){!t||!t.slider||!t.slider.snapIndex<0||(w.pagina=t.slider.snapIndex,o.$$phase?w.dashboard.activeIndexView=t.slider.snapIndex:o.$apply(function(){w.dashboard.activeIndexView=t.slider.snapIndex}))})}angular.module("sied.controllers").controller("PrincipalCtrl",o),o.$inject=["$scope","$q","$ionicPopup","$rootScope","ServidorFactory","MenuFactory","HostFactory","ClientAPIFactory","UsuarioFactory","TratarObjetosService","$log"]}(),function(){"use strict";function o(o,e,t){var n=this;n.titulo="SobreNos",n.Empresa={Nome:"Sied Sistemas",Cnpj:"03.367.362/0001-03",CEP:"77000-000",Logradouro:"501 Sul, Av. Teotônio Segurado, Conj. 01",Complemento:"Lt. 03, Ed. Executive Center, Sala 403",Bairro:"Plano Diretor Sul",Numero:"s/n",Cidade:"Palmas",Estado:"TO",T_Empresa:"(63) 3322-9404",T_Vendas:"",T_Suporte:"(63) 98446-0444",Email:"odair@siedsistemas.com.br",Site:"siedsistemas.com.br",Ano_Abertura:"1998"}}angular.module("sied.controllers").controller("SobreCtrl",o),o.$inject=["$ionicPlatform","$ionicPopup","$ionicSideMenuDelegate"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l,u){function d(){I.tipo=1;var o=I.tipo;e.when(o).then(function(){s.async("GetHoraPadrao").then(function(o){I.p1=o[0][0].HoraInicial,I.p2=o[0][0].HoraFinal,S()}).then(function(){g()})})}function m(o){return 2===o?"GetVendaPorProduto":3===o?"GetVendaPorGrupoProduto":4===o?"GetVendaGraficoPorVendedor":5===o?"GetVendaGraficoAnual":void 0}function p(){a.hide();var o=new Date;I.data={},I.data.ano=o.getFullYear();$()}function f(){if(4==I.tipo)for(var o=0,e=l.ContarObjetos(I.dados[0]);o<e;)I.data[[o]]=u.ConverterParaFloat(I.dados[0][o].Venda),I.labels[o]=I.dados[0][o].Vendedor.substring(0,3),o++;I.detalhes=[]}function h(o){if(a.show(),I.detalhes=[],4!=I.tipo)return s.async("GetTotalVendaPorComanda/"+o.d1+"/"+o.d2).then(function(o){a.show({template:"Carregando Vendas Por Comanda"}),I.detalhes=o,t(function(){a.hide()},1e3)}),o}function g(){a.show(),I.labels=[],I.data=[],I.dados=[];var o=m(I.tipo);if(5!==I.tipo){var n={d1:c.formatarDataHora(I.dataInicial),d2:c.formatarDataHora(I.dataFinal)};4===I.tipo&&(n.d1=c.formatarDataAPI(I.dataInicial),n.d2=c.formatarDataAPI(I.dataFinal),I.series=["Venda R$"]),e.when(n).then(function(e){return I.tipo>1&&s.async(o+"/"+e.d1+"/"+e.d2).then(function(o){a.show({template:"Carregando"}),I.dados=o,l.ContarObjetos(I.dados)>0&&(I.series=["Ano"],f()),t(function(){a.hide(),r.scrollTop()},1e3)}),e}).then(function(o){return h(o),o}).then(function(o){return C(o.d1,o.d2),o}).then(function(){r.scrollTop(),I.relatorio=!0})}else p()}function v(o){a.show(),I.labels=[],I.data=[],I.detalhes=[],I.dados=[],I.mostrarRodape=!1,s.async("GetVendaGraficoAnual/"+o).then(function(o){a.show({template:"Gerando Gráfico"}),I.dados=o,l.ContarObjetos(I.dados[0])>0&&w(),t(function(){a.hide(),r.scrollTop()},1e3)})}function C(o,e){a.show(),I.rodape=[],5!=I.tipo&&s.async("GetCalculaRodapeVenda/"+o+"/"+e).then(function(o){a.show({template:"Calculando Relatório de Vendas"}),I.rodape=o,l.ContarObjetos(I.rodape)>0&&(I.mostrarRodape=!0),t(function(){a.hide()},1e3)})}function b(){var o='<div class="list">';return o+='<label class="item item-input">',o+='<span class="input-label">Informar o ano: </span>',o+='<input type="number" ng-model="vm.data.ano" >',o+="</label>",o+="</div>"}function $(){return i.show({template:b(),title:"Informar o Ano",scope:n,buttons:[{text:"<b>Gerar Gráfico</b>",type:"button-light",onTap:function(o){I.data.ano?v(I.data.ano):o.preventDefault()}}]})}function S(){var o=I.p1.split(":"),e=I.p2.split(":");I.dataInicial=c.SubtrairDataSemFormato(1),I.dataInicial.setHours(o[0]),I.dataInicial.setMinutes(o[1]),I.dataInicial.setSeconds(o[2]),I.dataFinal=new Date,I.dataFinal.setHours(e[0]),I.dataFinal.setMinutes(e[1]),I.dataFinal.setSeconds(e[2])}function w(){for(var o=0,e=l.ContarObjetos(I.dados[0]),t=0;t<e;)I.data[[t]]=u.ConverterParaFloat(I.dados[0][t].Valor),I.labels[t]=I.dados[0][t].Mes.substring(0,3),o+=u.ConverterParaFloat(I.dados[0][t].Valor),t++;I.totalAno=u.ConverterParaString(o.toFixed(2))}var I=this;I.showFooter=!1,I.contentFooter="Teste",I.ano="",I.totalAno=0,I.titulo="Relatório de Vendas",I.mostrarRodape=!1,I.tipo="",I.dataInicial="",I.dataFinal="",I.p1="",I.p2="",I.colors=["rgb(159,204,0)"],I.dados=[],I.labels=[],I.series=[],I.data=[],I.tipos=[{id:1,descricao:"Geral"},{id:3,descricao:"Por Grupo de Produtos"},{id:4,descricao:"Por Vendedor"},{id:5,descricao:"Gerar Gráfico Anual"}],I.detalhes=[],I.rodape=[],I.init=d,I.Refresh=function(){I.dados=[],I.rodape=[],g(),r.scrollTop()},I.SetDataInicial=function(){5!==I.tipo&&g()},I.SetDataFinal=function(){5!==I.tipo&&g()},I.RetornarMetodo=m,I.GetAno=p,I.GetVenda=g,I.GerarGraficoPorAno=v,I.GerarRodape=C,I.TemplateGetAno=b,I.PrepararDatas=S,I.CalcularTotalAno=w,n.$on("EventLogin",d())}angular.module("sied.controllers").controller("VendasCtrl",o),o.$inject=["$log","$q","$timeout","$scope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","ClientAPIFactory","TratarDataService","TratarObjetosService","TratarFloatService"]}();