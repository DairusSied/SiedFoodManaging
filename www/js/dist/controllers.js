!function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l,u){function d(){T.dias=1,m()}function m(){n.show(),T.caixa=[],T.movimento=[],T.resumoMovimento=[],T.resumoVendas=[],T.balancete=[],T.cancelamentos=[],T.totalCancelamentos="",T.listagem=!0,r.async("GetTurno/"+T.dias).then(function(o){n.show({template:"Carregando Turnos"}),T.dados=o,a(function(){n.hide(),i.scrollTop()},1e3)})}function p(){a(function(){n.hide()},1e3)}function f(){n.show(),T.movimento=[],r.async("GetMovimentoDoTurno/"+T.caixa.ID_CAIXA+"/"+T.caixa.TURNO).then(function(o){n.show({template:"Carregando Movimentos do Turno"}),T.movimento=o,p()})}function h(){n.show(),T.resumoMovimento=[],r.async("GetResumoDoMovimentoDoTurno/"+T.caixa.ID_CAIXA+"/"+T.caixa.TURNO).then(function(o){n.show({template:"Carregando Resumo dos Movimentos do Turno"}),T.resumoMovimento=o,p()})}function g(){n.show(),T.resumoVendas=[],r.async("GetResumoDaVendaDoTurno/"+T.caixa.ID_CAIXA+"/"+T.caixa.TURNO).then(function(o){n.show({template:"Carregando Resumo das Vendas do Turno"}),T.resumoVendas=o,p()})}function v(){n.show(),T.balancete=[],r.async("GetBalanceteDoTurno/"+T.caixa.ID_CAIXA+"/"+T.caixa.TURNO).then(function(o){n.show({template:"Carregando Balancete do Turno"}),T.balancete=o,p()})}function C(){n.show(),T.cancelamentos=[],r.async("GetCancelamentoNoTurno/"+T.caixa.ID_CAIXA+"/"+T.caixa.TURNO).then(function(o){if(n.show({template:"Carregando Cancelamentos do Turno"}),c.ContarObjetos(o[0])>0){var e=P(o);T.cancelamentos=o,T.totalCancelamentos=l.ConverterParaString(e.toFixed(2))}p()})}function b(e){T.listagem=!1,T.caixa=e,T.datahora=s.RetornarDataHora(),o.when(T.caixa).then(f()).then(h()).then(g()).then(v()).then(C())}function $(){T.dias=T.data.dias,m()}function S(){T.data={},T.data.dias=1;I()}function w(){var o='<label class="item item-input">';return o+='<span class="input-label">Dias: </span>',o+='<input type="text" ng-model="vm.data.dias" readonly>',o+="</label>",o+='<div class="item range range-positive">',o+='<i class="icon ion-ios-minus"></i>',o+='<input type="range" min="1" max="31" ng-model="vm.data.dias">',o+='<i class="icon ion-ios-plus"></i>',o+="</div>"}function I(){return t.show({template:w(),title:"Informar os Dias",scope:e,buttons:[{text:"<b>Processar Relatório</b>",type:"button-light",onTap:function(o){T.data.dias?$():o.preventDefault()}}]})}function P(o){for(var e=o[0],t=c.ContarObjetos(e),n=0,a=0;a<t;)n+=l.ConverterParaFloat(e[a].VALOR),a++;return n}var T=this;T.listagem=!0,T.titulo="Relação de Caixas",T.dias="",T.datahora="",T.dataInicial="",T.totalCancelamentos="",T.movimento=[],T.resumoMovimento=[],T.resumoVendas=[],T.balancete=[],T.cancelamentos=[],T.dados=[],T.init=d,T.GetTurno=m,T.GerarRelatorio=b,T.ProcessarRelatorio=$,T.SelecionarDias=S,T.TemplateSelecionarDias=w,T.PopUpSelecionarDias=I,e.$on("EventLogin",d())}angular.module("sied.controllers").controller("CaixaCtrl",o),o.$inject=["$q","$scope","$ionicPopup","$ionicLoading","$timeout","$ionicScrollDelegate","ClientAPIFactory","TratarDataService","TratarObjetosService","TratarFloatService","$log"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s){function c(){C.nivel=s.getNivel(),u()}function l(){C.comandas=[],C.comanda="",C.tipo="",C.item="",C.index="",C.codigo="",C.relatorio=!0,u()}function u(){n.show(),C.relatorio=!0,o.when(C.relatorio).then(function(){m()}).then(function(){p()}).then(function(){i.scrollTop()})}function d(){e(function(){n.hide()},1e3)}function m(){n.show(),C.mesas=[],r.async("GetRetornaMesasEmMovimento").then(function(o){n.show({template:"Carregando Movimento das Mesas"}),C.mesas=o,d()})}function p(){n.show(),C.cartoes=[],r.async("GetRetornaCartoesEmMovimento").then(function(o){n.show({template:"Carregando Movimento dos Cartões"}),C.cartoes=o,d()})}function f(o,t){n.show(),C.comanda=o,C.tipo=t,C.relatorio=!1,C.comandas=[],r.async("GetRetornaItensDaComanda/"+o+"/"+t).then(function(o){n.show({template:"Carregando Itens da Comanda"}),C.comandas=o,e(function(){n.hide(),i.scrollTop()},1e3)})}function h(o,e,t){return a.show({title:"Atenção",template:"Deseja excluir esse item?",buttons:[{text:"Não",type:"button-light"},{text:"<b>Sim</b>",type:"button-light",onTap:function(n){n&&(C.item=o,C.index=e,C.codigo=t,v())}}]})}function g(o,e,t){h(o,t,e)}function v(){n.show(),r.async("GetCancelaItemDaComanda/"+C.item+"/"+C.codigo+"/"+C.comanda+"/"+C.tipo+"/2").then(function(o){n.show({template:"Removendo Item"}),C.comandas[0].splice(C.index,1),C.item="",C.index="",e(function(){n.hide(),0==C.comandas[0].length&&l()},500)})}var C=this;C.titulo="Cancelamento de itens",C.relatorio=!1,C.mesas=[],C.cartoes=[],C.comandas=[],C.comanda="",C.item="",C.index="",C.tipo="",C.codigo="",C.nivel="",C.init=c,C.Voltar=l,C.CarregarItemsEmMovimento=u,C.RetornaMesasEmMovimento=m,C.RetornaCartoesEmMovimento=p,C.RetornaItemsDaComanda=f,C.EnviarCancelamento=g,C.RemoverItemDaComanda=v,t.$on("EventLogin",c())}angular.module("sied.controllers").controller("CancelamentosCtrl",o),o.$inject=["$q","$timeout","$scope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","ClientAPIFactory","UsuarioFactory"]}(),function(){"use strict";function o(o,e,t,n,a,i){function r(){s()}function s(){n.show(),p.dados=[],i.async("GetRetornaProdutoPorPrecoCompra").then(function(o){n.show({template:"Carregando Produtos pelo preço de compra"}),p.dados=o,p.relatorio=!0,e(function(){n.hide(),a.scrollTop()},1e3)})}function c(){e(function(){n.hide()},1e3)}function l(o){n.show(),p.cabecalho=[],i.async("GetRetornaCompraCabecalhoItem/"+o.Codigo).then(function(o){n.show(),p.cabecalho=o,c()})}function u(o){n.show(),p.detalhes=[],i.async("GetRetornaCompraItem/"+o.Codigo).then(function(o){n.show(),p.detalhes=o,c()})}function d(e){n.show(),p.relatorio=!1,o.when(p.relatorio).then(l(e)).then(u(e)).then(function(){a.scrollTop()})}function m(){p.cabecalho=[],p.detalhes=[],p.relatorio=!0,n.show(),e(function(){n.hide()},1e3)}var p=this;p.titulo="Compras",p.relatorio=!1,p.dados=[],p.cabecalho=[],p.detalhes=[],p.init=r,p.Voltar=m,p.RetornarProdutosByPrecoCompra=s,p.RetornarDetalhesDoItem=d,t.$on("EventLogin",r())}angular.module("sied.controllers").controller("ComprasCtrl",o),o.$inject=["$q","$timeout","$scope","$ionicLoading","$ionicScrollDelegate","ClientAPIFactory"]}(),function(){"use strict";function o(o,e,t,n,a,i,r){function s(){C.mensagem=[],n.show(),i.allServidores().then(function(o){C.servidores=o,c()})}function c(){e(function(){n.hide()},1e3)}function l(){if(n.show(),C.mensagem=[],!C.Ip)return C.mensagem[0]="Nenhum IP foi especificado",c(),!1;i.findByValue(C.Ip).then(function(t){var a=t.Ip+":"+t.Porta;C.servidor={},C.Ip="",r.limparServidores().then(function(){var t=new Date,i=""+t.getDay()+t.getMonth()+t.getFullYear()+t.getHours()+t.getMinutes()+t.getSeconds();r.addServidor({_id:i,servidor:a}).then(function(t){e(function(){n.hide(),o.location.reload(!0)},500)})})})}function u(){C.mensagem=[],C.servidor={Ip:"",Porta:""};g()}function d(){if(n.show(),p(),!(C.mensagem.length>0)){C.Ip=C.servidor.Ip;var o=new Date,e=""+o.getDay()+o.getMonth()+o.getFullYear()+o.getHours()+o.getMinutes()+o.getSeconds();C.servidor={_id:e,Ip:C.servidor.Ip,Porta:C.servidor.Porta},i.addServidor(C.servidor).then(function(o){C.Ip=C.servidor.Ip,l()})}}function m(){n.show(),i.findByValue(C.Ip).then(function(o){var e=o.Ip+":"+o.Porta;r.findByValue(e).then(function(o){o&&r.deleteServidor(o).then(function(){c()})}),i.deleteServidor(o).then(function(){c()})})}function p(){C.mensagem=[],""==C.servidor.Ip&&C.mensagem.push("O IP é Obrigatório"),""==C.servidor.Porta&&C.mensagem.push("A Porta é Obrigatório")}function f(){C.mensagem=[]}function h(){return C.mensagem=[],""==C.Ip?(C.mensagem.push("Nenhum IP foi especificado"),!1):a.show({title:"Atenção",template:"Deseja excluir esse Servidor?",scope:t,buttons:[{text:"Não",type:"button-light"},{text:"Sim",type:"button-light",onTap:function(o){m()}}]})}function g(){return a.show({title:"Novo Servidor",template:v(),scope:t,buttons:[{text:"Cancelar",type:"button-light"},{text:"Salvar",type:"button-light",onTap:function(o){if(p(),!(C.mensagem.length>0))return d();o.preventDefault()}}]})}function v(){var o="";return o+='<div class="item item-assertive" ng-show="vm.mensagem.length > 0">',o+="<ul>",o+='<li ng-repeat="item in vm.mensagem">{{ item }}</li>',o+="</ul>",o+="</div>",o+='<label class="item item-input item-stacked-label">',o+='<span class="input-label">IP do Servidor</span>',o+='<input type="text" name="Ip" ng-model="vm.servidor.Ip" ng-change="vm.LimparMensagem()" autofocus />',o+="</label>",o+='<label class="item item-input item-stacked-label">',o+='<span class="input-label">Porta do Servidor</span>',o+='<input type="text" name="Porta" ng-model="vm.servidor.Porta" ng-change="vm.LimparMensagem()" />',o+="</label>"}var C=this;C.servidores=[],C.servidor={},C.selecionado={},C.index="",C.mensagem=[],C.host="",C.Ip="",C.init=s,C.selecionar=l,C.novo=u,C.salvar=d,C.excluir=m,C.validarDados=p,C.LimparMensagem=f,C.PopUpConfirmarExclusao=h,C.PopUpNovoServidor=g,C.TemplateNovoServidor=v,s()}angular.module("sied.controllers").controller("ConfigCtrl",o),o.$inject=["$window","$timeout","$scope","$ionicLoading","$ionicPopup","DataFactory","ServidorFactory"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c){function l(){a.show(),e.when(p.caixa).then(m())}function u(){a.show(),p.caixa=[],r.async("GetVendaEmConsumoCaixa").then(function(o){a.show({template:"Carregando Vendas em Caixa"}),p.caixa=o,t(function(){a.hide()},1e3)})}function d(){a.show(),p.consumo=[],r.async("GetVendaEmConsumo").then(function(o){a.show({template:"Carregando Vendas em Consumo"}),p.consumo=o,t(function(){a.hide()},1e3)})}function m(){e.when(p.caixa).then(u()).then(d()),i.scrollTop()}var p=this;p.titulo="Vendas em Consumo",p.controlador="ConsumoCtrl",p.metodo="",p.caixa=[],p.consumo=[],p.init=l,p.GerarRelatorio=m,p.GetVendaEmConsumoCaixa=u,p.GetVendaEmConsumo=d,n.$on("EventLogin",l())}angular.module("sied.controllers").controller("ConsumoCtrl",o),o.$inject=["$log","$q","$timeout","$scope","$ionicLoading","$ionicScrollDelegate","ClientAPIFactory","TratarDataService","TratarObjetosService"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l){function u(){g.dataInicial=s.SubtrairDataSemFormato(1),g.dataFinal=new Date,d()}function d(){a.show(),e.when(g.dataFinal).then(f()).then(h()).then(function(){i.scrollTop()})}function m(){for(var o=g.fechados,e=0,t=c.ContarObjetos(o[0]),n=0;n<t;)e+=l.ConverterParaFloat(o[0][n].Total),n++;g.totalFechados=e,g.totalGeral=g.totalFechados}function p(){for(var o=g.consumos,e=0,t=c.ContarObjetos(o[0]),n=0;n<t;)e+=l.ConverterParaFloat(o[0][n].Total),n++;g.totalConsumos=e,g.totalGeral=g.totalGeral+g.totalConsumos,g.totalFechados.toFixed(2),g.totalFechados.toFixed(2),g.totalGeral.toFixed(2),g.totalGeral=l.ConverterParaString(g.totalGeral),g.totalConsumos=l.ConverterParaString(g.totalConsumos),g.totalFechados=l.ConverterParaString(g.totalFechados)}function f(){a.show(),g.fechados=[],g.totalFechados=0;var o=s.formatarDataHora(g.dataInicial),e=s.formatarDataHora(g.dataFinal);r.async("GetRetornaCouvertFechado/"+o+"/"+e).then(function(o){a.show({template:"Carregando Couvert Fechado"}),g.fechados=o,c.ContarObjetos(g.fechados[0])>0&&m(),t(function(){a.hide()},1e3)})}function h(){a.show(),g.consumos=[],g.totalConsumos=0,r.async("GetRetornaCouvertMovimento").then(function(o){a.show({template:"Carregando Couvert em Movimento"}),g.consumos=o,c.ContarObjetos(g.consumos[0])>0&&p(),t(function(){a.hide()},1e3)})}var g=this;g.dataInicial="",g.dataFinal="",g.fechados=[],g.consumos=[],g.totalGeral=0,g.totalConsumos=0,g.totalFechados=0,g.init=u,g.GerarCouvert=d,g.GetRetornaCouvertFechado=f,g.GetRetornaCouvertMovimento=h,n.$on("EventLogin",u())}angular.module("sied.controllers").controller("CouvertCtrl",o),o.$inject=["$log","$q","$timeout","$scope","$ionicLoading","$ionicScrollDelegate","ClientAPIFactory","TratarDataService","TratarObjetosService","TratarFloatService"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c){function l(){u(),C.grupo=0,C.tipo=0,p()}function u(){s.async("GetGrupoDeProduto").then(function(o){C.grupos=[],C.grupos=o,c.ContarObjetos(C.grupos)>0&&C.grupos[0].unshift({Codigo:0,Grupo:"Todos"})})}function d(){C.data={},C.data.tipo=C.tipo;g()}function m(){C.data={},C.data.grupo=C.grupo;v()}function p(){n.show();var e={grupo:C.grupo,tipo:C.tipo};C.relatorio=!1,C.dados=[],o.when(e).then(function(o){var e="";switch(o.tipo){case 0:e=0;break;case 1:e="EstoqueZero";break;case 2:e="AbaixoEstoqueMinimo";break;case 3:e="AbaixoPontoPedido";break;case 4:e="AbaixoEstoquePadrao"}s.async("GetEstoque/"+o.grupo+"/"+e).then(function(o){n.show({template:"Carregando Estoque"}),C.dados=o,c.ContarObjetos(C.dados[0])>0&&(C.relatorio=!0),t(function(){n.hide(),r.scrollTop()},1e3)})})}function f(){for(var o=0,e=C.tipos.length,t="<ion-list>";o<e;)t+='<ion-radio ng-model="vm.data.tipo" ng-value="'+C.tipos[o].id+'" style="font-size: 12px;">'+C.tipos[o].descricao+"</ion-radio>",o++;return t+="</ion-list>"}function h(){for(var o=0,e=c.ContarObjetos(C.grupos[0]),t="<ion-list>";o<e;)t+='<ion-radio ng-model="vm.data.grupo" ng-value="'+C.grupos[0][o].Codigo+'" style="font-size: 12px;" >'+C.grupos[0][o].Grupo+"</ion-radio>",o++;return t+="</ion-list>"}function g(){return i.show({template:f(),title:"Informar o Tipo de Relatório",scope:a,buttons:[{text:"<b>Gerar Relatório</b>",type:"button-light",onTap:function(o){C.tipo=C.data.tipo,p()}}]})}function v(){return i.show({template:h(),title:"Informar o Grupo",scope:a,buttons:[{text:"<b>Selecionar Grupo</b>",type:"button-light",onTap:function(o){C.grupo=C.data.grupo,p()}}]})}var C=this;C.titulo="Controle de Estoque",C.relatorio=!1,C.tipo=0,C.grupo=0,C.dados=[],C.grupos=[],C.tipos=[{id:0,descricao:"Todos"},{id:1,descricao:"Estoque Zero"},{id:2,descricao:"Abaixo do Estoque Mínimo"},{id:3,descricao:"Abaixo do Ponto de Pedido"},{id:4,descricao:"Abaixo do Estoque Padrão"}],C.init=l,C.LoadGrupos=u,C.SetTipo=d,C.SetGrupo=m,C.TemplateSetTipo=f,C.TemplateSetGrupo=h,C.PopUpSetTipo=g,C.PopUpSetGrupo=v,C.GerarRelatorio=p,a.$on("EventLogin",l())}angular.module("sied.controllers").controller("EstoqueCtrl",o),o.$inject=["$q","$log","$timeout","$ionicLoading","$scope","$ionicPopup","$ionicScrollDelegate","ClientAPIFactory","TratarObjetosService"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l){function u(){a.show(),g.dataFinal=new Date,o.when(g.dataFinal).then(function(){g.dataInicial=l.SubtrairDataSemFormato(1)}).then(function(){h()})}function d(o){s.copy(o).then(function(){console.log(o)})}function m(o){var e="<strong> Título: "+o.Titulo+"<br />";return e+="<strong> Fornecedor: "+o.Fornecedor+"<br />",e+="<strong> Valor: "+o.Valor+"<br />",e+="<strong> Vencimento: "+o.Vencimento,""!==o.Barra&&(e+="<br /><strong>Cod.Barra: </strong>"+o.Barra.substring(0,18)),e}function p(o){return i.show({title:"Copiar Código de Barra",template:m(o),buttons:[{text:"Sair",type:"button-light"},{text:"Copiar",type:"button-light",onTap:function(e){e&&d(o.Barra)}}]})}function f(o){if(""!=o.Titulo||""!=o.Fornecedor||""!=o.Vencimento)p(o)}function h(){a.show();var o={d1:l.formatarDataAPI(g.dataInicial),d2:l.formatarDataAPI(g.dataFinal)};g.dados=[],c.async("GetContasAPagar/"+o.d1+"/"+o.d2).then(function(o){a.show({template:"Carregando Financeiro"}),g.dados=o}).then(function(){e(function(){a.hide(),r.scrollTop()},1e3)})}var g=this;g.titulo="Financeiro",g.dados=[],g.relatorio=!1,g.dataInicial="",g.dataFinal="",g.init=u,g.copiarTexto=d,g.pegarCodigoDeBarra=f,g.GerarRelatorio=h,n.$on("EventLogin",u())}angular.module("sied.controllers").controller("FinanceiroCtrl",o),o.$inject=["$q","$timeout","$log","$scope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","$cordovaClipboard","ClientAPIFactory","TratarDataService"]}(),function(){"use strict";function o(o,e,t,n,a){function i(){t.toggleLeft()}function r(){c.cnpj=n.cnpj}function s(){e.confirm({title:"Atenção",template:"Tem certeza que deseja sair do sistema?"}).then(function(o){o&&ionic.Platform.exitApp()})}var c=this;c.ConfirmarSaida=s,c.toggleLeft=i,c.init=r,r(),o.registerBackButtonAction(function(o){s()},100)}angular.module("sied.controllers").controller("InicioCtrl",o),o.$inject=["$ionicPlatform","$ionicPopup","$ionicSideMenuDelegate","$rootScope","$log"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l,u){function d(){x.menu=[],x.slide=[],m().then(function(o){o?(x.host=o[0],r.setConfig(x.host.servidor),S()):f(0).then(function(o){x.menu=o.menu,x.slide=o.slide})}).catch(function(o){f(0).then(function(o){x.menu=o.menu,x.slide=o.slide})})}function m(){var o=e.defer();return a.lastServidor().then(function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise}function p(o){x.index=o,x.swiper.slideTo(o)}function f(o){var t=e.defer(),n=[],a=[],r=0,s=0;return i.montar(o).then(function(o){for(a=o,r=o.length,n.push({Evento:"vm.preLogin()",Icone:"ion-locked",Nome:"Login",Index:"",Template:""});s<r;)n.push({Evento:o[s].Evento,Icone:o[s].Icone,Nome:o[s].Nome,Template:o[s].Template}),s++;n.push({Evento:"vm.Sair()",Icone:"ion-power",Nome:"Sair",Index:"",Template:""}),t.resolve({slide:a,menu:n})}),t.promise}function h(){var o=x.dados.usuario;x.usuario=x.usuarios[0][o],I(),x.popup.close()}function g(){var o="";return o+='<div class="item item-assertive mb" ng-show="vm.mensagem.length>0">',o+="<ul>",o+='<li ng-repeat="item in vm.mensagem">{{ item }}</li>',o+="</ul>",o+="</div>",o+='<input ng-model="vm.dados.senha" type="number" autofocus ng-change="vm.mensagem=[]"/>'}function v(o){for(var e="",t=0;t<o;)e+='<ion-radio ng-model="vm.dados.usuario" ng-value="'+t+'" ng-click="vm.SelecionarUsuario()">'+x.usuarios[0][t].Nome+"</ion-radio>",t++;return e}function C(){return x.menu=[],x.slide=[],t.show({title:"Informe a senha",template:g(),scope:o,buttons:[{text:"Sair",type:"button-light",onTap:function(o){f(0).then(function(o){x.menu=o.menu,x.slide=o.slide,ionic.Platform.exitApp()})}},{text:"Voltar",type:"button-light",onTap:function(o){S()}},{text:"Entrar",type:"button-light",onTap:function(o){""==x.dados.senha&&x.mensagem.push("A Senha é obrigatório"),x.dados.senha!=x.usuario.Senha&&x.mensagem.push("Senha inválida"),x.mensagem.length>0?o.preventDefault():b()}}]})}function b(){c.setParams(x.usuario),f(1).then(function(e){x.menu=e.menu,x.slide=e.slide,x.checarLogin=!0,o.$emit("EventLogin",w(x.usuario))})}function $(e){return t.show({title:"Selecione o usuario",template:v(e),scope:o})}function S(){x.menu=[],x.slide=[],x.checarLogin=!1,x.dados.usuario="",s.asyncLogin("GetLogin").then(function(o){x.usuarios=o;var e=l.ContarObjetos(x.usuarios[0]);s.async("GetRetornaCnpjDaEmpresa").then(function(o){n.cnpj=o[0]}),x.popup=$(e)}).catch(function(o){f(0).then(function(o){x.menu=o.menu,x.slide=o.slide})})}function w(o){x.usuario=o}function I(){x.dados.senha="";C()}function P(){0!==o.index&&(x.index=o.index-1,p(o.index))}function T(){ionic.Platform.exitApp()}var x=this;n.showFooter=!1,x.hide=!1,x.index=0,x.selecionado={},x.dados={usuario:"",senha:""},x.mensagem=[],x.servidores=[],x.usuarios=[],x.usuario={},x.menu=[],x.popup="",x.checarLogin=!1,x.dashboard={swiper:!1,slider:!1,activeIndexView:0},x.configurarServidor=m,x.MudarSlide=p,x.SelecionarUsuario=h,x.Voltar=P,x.Sair=T,x.login=I,x.preLogin=S,x.init=d,x.pagina=0,o.$on("$ionicSlides.sliderInitialized",function(o,e){e&&e.slider&&(x.swiper=e.slider,x.teste=e.slider)}),o.$on("$ionicSlides.slideChangeStart",function(e,t){!t||!t.slider||!t.slider.snapIndex<0||(x.pagina=t.slider.snapIndex,o.$$phase?x.dashboard.activeIndexView=t.slider.snapIndex:o.$apply(function(){x.dashboard.activeIndexView=t.slider.snapIndex}))})}angular.module("sied.controllers").controller("PrincipalCtrl",o),o.$inject=["$scope","$q","$ionicPopup","$rootScope","ServidorFactory","MenuFactory","HostFactory","ClientAPIFactory","UsuarioFactory","TratarObjetosService","$log"]}(),function(){"use strict";function o(o,e,t){var n=this;n.titulo="SobreNos",n.Empresa={Nome:"Sied Sistemas",Cnpj:"03.367.362/0001-03",CEP:"77000-000",Logradouro:"501 Sul, Av. Teotônio Segurado, Conj. 01",Complemento:"Lt. 03, Ed. Executive Center, Sala 403",Bairro:"Plano Diretor Sul",Numero:"s/n",Cidade:"Palmas",Estado:"TO",T_Empresa:"(63) 3322-9404",T_Vendas:"",T_Suporte:"(63) 98446-0444",Email:"odair@siedsistemas.com.br",Site:"siedsistemas.com.br",Ano_Abertura:"1998"}}angular.module("sied.controllers").controller("SobreCtrl",o),o.$inject=["$ionicPlatform","$ionicPopup","$ionicSideMenuDelegate"]}(),function(){"use strict";function o(o,e,t,n,a,i,r,s,c,l,u){function d(){x.tipo=1;var o=x.tipo;e.when(o).then(function(){s.async("GetHoraPadrao").then(function(o){x.p1=o[0][0].HoraInicial,x.p2=o[0][0].HoraFinal,P()}).then(function(){b()})})}function m(){x.dados=[],x.rodape=[],b(),r.scrollTop()}function p(){5!==x.tipo&&b()}function f(){5!==x.tipo&&b()}function h(o){return 2===o?"GetVendaPorProduto":3===o?"GetVendaPorGrupoProduto":4===o?"GetVendaGraficoPorVendedor":5===o?"GetVendaGraficoAnual":void 0}function g(){a.hide();var o=new Date;x.data={},x.data.ano=o.getFullYear();I()}function v(){if(4==x.tipo)for(var o=0,e=l.ContarObjetos(x.dados[0]);o<e;)x.data[[o]]=u.ConverterParaFloat(x.dados[0][o].Venda),x.labels[o]=x.dados[0][o].Vendedor.substring(0,3),o++;x.detalhes=[]}function C(o){if(a.show(),x.detalhes=[],4!=x.tipo)return s.async("GetTotalVendaPorComanda/"+o.d1+"/"+o.d2).then(function(o){a.show({template:"Carregando Vendas Por Comanda"}),x.detalhes=o,t(function(){a.hide()},1e3)}),o}function b(){a.show(),x.labels=[],x.data=[],x.dados=[];var o=h(x.tipo);if(5!==x.tipo){var n={d1:c.formatarDataHora(x.dataInicial),d2:c.formatarDataHora(x.dataFinal)};4===x.tipo&&(n.d1=c.formatarDataAPI(x.dataInicial),n.d2=c.formatarDataAPI(x.dataFinal),x.series=["Venda R$"]),e.when(n).then(function(e){return x.tipo>1&&s.async(o+"/"+e.d1+"/"+e.d2).then(function(o){a.show({template:"Carregando"}),x.dados=o,l.ContarObjetos(x.dados)>0&&(x.series=["Ano"],v()),t(function(){a.hide(),r.scrollTop()},1e3)}),e}).then(function(o){return C(o),o}).then(function(o){return S(o.d1,o.d2),o}).then(function(){r.scrollTop(),x.relatorio=!0})}else g()}function $(o){a.show(),x.labels=[],x.data=[],x.detalhes=[],x.dados=[],x.mostrarRodape=!1,s.async("GetVendaGraficoAnual/"+o).then(function(o){a.show({template:"Gerando Gráfico"}),x.dados=o,l.ContarObjetos(x.dados[0])>0&&T(),t(function(){a.hide(),r.scrollTop()},1e3)})}function S(o,e){a.show(),x.rodape=[],5!=x.tipo&&s.async("GetCalculaRodapeVenda/"+o+"/"+e).then(function(o){a.show({template:"Calculando Relatório de Vendas"}),x.rodape=o,l.ContarObjetos(x.rodape)>0&&(x.mostrarRodape=!0),t(function(){a.hide()},1e3)})}function w(){var o='<div class="list">';return o+='<label class="item item-input">',o+='<span class="input-label">Informar o ano: </span>',o+='<input type="number" ng-model="vm.data.ano" >',o+="</label>",o+="</div>"}function I(){return i.show({template:w(),title:"Informar o Ano",scope:n,buttons:[{text:"<b>Gerar Gráfico</b>",type:"button-light",onTap:function(o){x.data.ano?$(x.data.ano):o.preventDefault()}}]})}function P(){var o=x.p1.split(":"),e=x.p2.split(":");x.dataInicial=c.SubtrairDataSemFormato(1),x.dataInicial.setHours(o[0]),x.dataInicial.setMinutes(o[1]),x.dataInicial.setSeconds(o[2]),x.dataFinal=new Date,x.dataFinal.setHours(e[0]),x.dataFinal.setMinutes(e[1]),x.dataFinal.setSeconds(e[2])}function T(){for(var o=0,e=l.ContarObjetos(x.dados[0]),t=0;t<e;)x.data[[t]]=u.ConverterParaFloat(x.dados[0][t].Valor),x.labels[t]=x.dados[0][t].Mes.substring(0,3),o+=u.ConverterParaFloat(x.dados[0][t].Valor),t++;x.totalAno=u.ConverterParaString(o.toFixed(2))}var x=this;x.showFooter=!1,x.contentFooter="Teste",x.ano="",x.totalAno=0,x.titulo="Relatório de Vendas",x.mostrarRodape=!1,x.tipo="",x.dataInicial="",x.dataFinal="",x.p1="",x.p2="",x.colors=["rgb(159,204,0)"],x.dados=[],x.labels=[],x.series=[],x.data=[],x.tipos=[{id:1,descricao:"Geral"},{id:3,descricao:"Por Grupo de Produtos"},{id:4,descricao:"Por Vendedor"},{id:5,descricao:"Gerar Gráfico Anual"}],x.detalhes=[],x.rodape=[],x.init=d,x.Refresh=m,x.SetDataInicial=p,x.SetDataFinal=f,x.RetornarMetodo=h,x.GetAno=g,x.GetVenda=b,x.GerarGraficoPorAno=$,x.GerarRodape=S,x.TemplateGetAno=w,x.PrepararDatas=P,x.CalcularTotalAno=T,n.$on("EventLogin",d())}angular.module("sied.controllers").controller("VendasCtrl",o),o.$inject=["$log","$q","$timeout","$scope","$ionicLoading","$ionicPopup","$ionicScrollDelegate","ClientAPIFactory","TratarDataService","TratarObjetosService","TratarFloatService"]}();